<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.tianfang.message.mapper.NoticeUsersExMapper">
	 <insert id="releaseNotice" parameterType="java.util.List">  
      INSERT INTO sst_notice_users (id, notice_id, user_id, readstat,
	               create_time, last_update_time, stat)
      VALUES 
     <foreach collection="list" item="item" index="index" separator="," >  
        (#{item.id},#{item.noticeId},#{item.userId},#{item.readstat},
         #{item.createTime},#{item.lastUpdateTime},#{item.stat})  
    </foreach> 
  </insert>  

    <select id="getLast" resultType="com.tianfang.message.dto.NoticeDto" parameterType="java.lang.String">
        select b.*,a.readstat as ReadStat from sst_notice_users as a left join sst_notice as b on a.notice_id = b.id
        where a.user_id = #{userId} order by b.create_time desc limit 0,1;
    </select>

</mapper> 