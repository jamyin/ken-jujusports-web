<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.tianfang.message.mapper.NoticeUsersExMapper">
	 <insert id="releaseNotice" parameterType="java.util.List">  
      INSERT INTO sst_notice_users (id, notice_id, user_id, readstat,
	               create_time, last_update_time, stat)
      VALUES 
     <foreach collection="list" item="item" index="index" separator="," >  
        (#{item.id},#{item.noticeId},#{item.userId},#{item.readstat},
         #{item.createTime},#{item.lastUpdateTime},#{item.stat})  
    </foreach> 
  </insert>  

    <select id="getLast" resultType="com.tianfang.message.dto.NoticeDto" parameterType="java.lang.String">
        select b.id,b.title,b.create_user_id as createUserId ,b.to_users as toUsers,b.create_user_name as createUserName,
        b.content,b.group_id as groupId,b.group_name as groupName,b.pic,b.create_time as createTime,b.stat,b.allow_forward as allowForward, 
        a.readstat as ReadStat  
        FROM sst_notice_users as a  
        LEFT JOIN sst_notice as b  
        ON a.notice_id = b.id 
        WHERE a.user_id = #{userId}  
        ORDER BY b.create_time desc 
        LIMIT 0,1;
    </select>

</mapper> 