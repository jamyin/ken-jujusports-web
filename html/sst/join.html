<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta content="yes" name="apple-mobile-web-app-capable">
  <meta content="yes" name="apple-touch-fullscreen">
  <meta content="telephone=no,email=no" name="format-detection">
  <title>申请加入</title>
  <script src="//g.tbcdn.cn/mtb/lib-flexible/0.3.4/??flexible_css.js,flexible.js"></script>
  <script src="//libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>

  <link rel="stylesheet" type="text/css" href="css/join.css" >
</head>

<body>

  <div class="join-info step1">
    <h2 class="step"><span class="no">1</span><label for="">必填信息</label></h2>
    <ul class="join-info-basic">
      <li>
        <label class="show" >姓名</label>
        <!-- <label class="rt">郝建</label> -->
        <input class="rt js-name" type="text"  value="郝建">
      </li>
      <li>
        <label class="show" >性别</label>
        <!-- <i class="bracket">&gt;</i> -->
        <!-- <label class="rt ">男</label> -->
        <select class="genger js-gender" name="">
          <option value="男">男</option>
          <option value="女">女</option>
        </select>
      </li>
      <!-- <li>
      <label class="show" >出生年月</label>
      <i class="bracket">&gt;</i>
      <label class="rt ">1992-04-04</label>
      <input class="rt js-date" type="date" name="name" value="1992-02-02">
    </li> -->
    <li>
      <label class="show" >身份证号</label>
      <!-- <i class="bracket">&gt;</i>
      <label class="rt ">624682199603260528</label> -->
      <input class="rt js-id" type="text" name="name" value="52263519890117727X">
    </li>
    <li>
      <label class="show" >手机号码</label>
      <!-- <i class="bracket">&gt;</i>
      <label class="rt ">13886868686</label> -->
      <input class="rt js-phone" type="text" name="name" value="13886868686">
    </li>
    <li>
      <label class="show" >所在地</label>
      <!-- <i class="bracket">&gt;</i>
      <label class="rt ">上海</label> -->
      <input class="rt js-place" type="text" name="name" value="上海">
    </li>
  </ul>
  <input class="rt js-date hide" type="date" name="name">
  <input class="rt js-age hide" type="date" >
  <div class="pro-bar pro-bar-50">
    <div class="step-tip">
      <span>1</span>/<span>3</span>
    </div>
  </div>
  <div class="bt next bt-step1">
    下一步
  </div>
</div>

<div class="join-info step2 hide">
  <h2 class="step"><span class="no">2</span><label for="">备选信息</label></h2>
  <p class="step2-tip">请根据个人实际参赛情况选填相关信息，以备未来参赛报名使用</p>
  <ul class="join-info-basic">
    <li>
      <label class="show" >场上位置</label>
      <!-- <i class="bracket">&gt;</i>
      <label class="rt ">暂无</label> -->
      <input class="rt" type="text" name="name" value="暂无">
    </li>
    <li>
      <label class="show" >工作单位</label>
      <!-- <i class="bracket">&gt;</i>
      <label class="rt ">上海天坊信息科技有限公司</label> -->
      <input class="rt" type="text" name="name" value="上海天坊信息科技有限公司">
    </li>
    <li>
      <label class="show" >所在学校</label>
      <!-- <i class="bracket">&gt;</i>
      <label class="rt ">暂无</label> -->
      <input class="rt" type="text" name="name" value="暂无">
    </li>
    <li>
      <label class="show" >学籍卡号</label>
      <!-- <i class="bracket">&gt;</i>
      <label class="rt ">暂无</label> -->
      <input class="rt" type="text" name="name" value="暂无">
    </li>
    <li>
      <label class="show" >监护人姓名</label>
      <!-- <i class="bracket">&gt;</i>
      <label class="rt ">暂无</label> -->
      <input class="rt" type="text" name="name" value="暂无">
    </li>
    <li>
      <label class="show" >与用户关系</label>
      <!-- <i class="bracket">&gt;</i>
      <label class="rt ">暂无</label> -->
      <input class="rt" type="text" name="name" value="暂无">
    </li>
    <li>
      <label class="show" >是否参加过陈毅杯</label>
      <!-- <i class="bracket">&gt;</i>
      <label class="rt ">否</label> -->
      <select class="" name="">
        <option value="" selected>是</option>
        <option value="">否</option>
      </select>
    </li>
    <li>
      <label class="show" >是否参加过校园联盟</label>
      <!-- <i class="bracket">&gt;</i>
      <label class="rt ">是</label> -->
      <select class="" name="">
        <option value="" >是</option>
        <option value="" selected>否</option>
      </select>
    </li>
  </ul>
  <div class="pro-bar pro-bar2">
    <div class="step-tip">
      <span>2</span>/<span>3</span>
    </div>
  </div>
  <div class="bt prev  bt-2">
    上一步
  </div>
  <div class="bt next  bt-2">
    下一步
  </div>
</div>

<div class="join-info step3 hide">
  <h2 class="step"><span class="no">3</span><label for="">填写申请理由</label></h2>
  <div class="join-reason">
    <p class="join-reason-tip">
      申请加入理由
    </p>
    <textarea class="join-textarea" name="name" rows="8" cols="40"></textarea>
  </div>
  <p class="step3-tip">
    * 1、需要手机注册赛事通会员<br>
    * 2、24小时内只能申请一次
  </p>
  <div class="bt prev bt-2">
    上一步
  </div>
  <div class="bt submit bt-2">
    提交申请
  </div>
</div>
<script type="text/javascript">
$(function() {
  $(".next").on("click",function(){
    var idNO=$(".js-id").val();
    if($(this).hasClass("bt-step1")){
      if(check1()){
        return;
      }
      var birthday="";
      //校验通过后对生日字段进行设置
      if(idNO.length===18){
        birthday=idNO.substr(6,4)+"-"+idNO.substr(10,2)+"-"+idNO.substr(12,2);
      }else{
        birthday=idNO.substr(6,2)+"-19"+idNO.substr(8,2)+"-"+idNO.substr(10,2);
      }
      $(".js-date").val(birthday);
      // debugger;
    }
    $(this).parents(".join-info").addClass("hide").next().removeClass("hide");
  });
  $(".prev").on("click",function(){
    $(this).parents(".join-info").addClass("hide").prev().removeClass("hide");
  });
  $(".submit").on("click",function(){
    if(check3()){
      return;
    }
    alert("提交数据");
  });

  $(".js-name,.js-place,.js-gender").on("blur",function(){
    if($(this).val().length==0){
      addError($(this));
    }else{
      removeError($(this));
    }
  });

  var reg_phone=/^1\d{10}$/;
  $(".js-phone").on("blur",function(){
    if(!reg_phone.test($(this).val())){
      addError($(this));
    }else{
      removeError($(this));
    }
  });

  var reg_id = /^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/;
  $(".js-id").on("blur",function(){
    if(!reg_id.test($(this).val())){
      addError($(this));
    }else{
      removeError($(this));
    }
  });
  $(".join-textarea").on("blur",function(){
    if($(this).val().length===0){
      $(this).parent().find("p").addClass("error");
    }else{
      $(this).parent().find("p").removeClass("error");
    }
  });


  function check1(){
    $(".join-info-basic").find("label").removeClass("error");
    var flag_return=false,$id=$(".js-id"),
    reg_id = /^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/;
    // debugger;
    if($(".js-name").val().length==0){
      $(".js-name").parent().find("label").addClass("error");
      flag_return=true;
    }
    if($(".js-gender").val().length==0){
      $(".js-gender").parent().find("label").addClass("error");
      flag_return=true;
    }
    // var $date=$(".js-date");
    // if($date.val().length!=10){
    //   addError($date);
    //   flag_return=true;
    // }
    // debugger;
    if(!reg_id.test($id.val())){
      addError($id);
      flag_return=true;
    }
    var $phone=$(".js-phone"),reg_phone=/^1\d{10}$/;
    if(!reg_phone.test($phone.val())){
      addError($phone);
      flag_return=true;
    }
    var $place=$(".js-place");
    if($place.val().length==0){
      addError($place);
      flag_return=true;
    }
    return flag_return;
  }
});
function check3(){
  var flag_return=false,reson = $(".join-textarea").val();
  if(reson.length==0){
    $(".join-textarea").parent().find("p").addClass("error");
    flag_return=true;
  }else{
    $(this).parent().find("p").removeClass("error");
  }
  return flag_return;
};
function addError(selector){
  selector.parent().find("label").addClass("error");
}
function removeError(selector){
  selector.parent().find("label").removeClass("error");
}
</script>
</body>

</html>
